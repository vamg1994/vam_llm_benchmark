"""
Database models for the AI model comparison application.
This module defines the SQLAlchemy ORM models used to store and retrieve voting data.
"""

from sqlalchemy import Column, Integer, String, DateTime, text
from sqlalchemy.sql import func
from database import Base

class Vote(Base):
    """
    Vote model for storing user votes and model responses.

    Attributes:
        id (int): Primary key for the vote record
        input_text (str): The original prompt/question from the user
        output_chatgpt (str): Response generated by ChatGPT
        output_claude (str): Response generated by Claude
        output_deepseek (str): Response generated by DeepSeek
        winner (str): The model chosen as winner by the user
        created_at (datetime): Timestamp when the vote was recorded
    """
    __tablename__ = "votes"

    id = Column(Integer, primary_key=True, server_default=text("nextval('votes_id_seq'::regclass)"))
    input_text = Column(String(500), nullable=False, comment="User's original prompt")
    output_chatgpt = Column(String(500), nullable=False, comment="ChatGPT's response")
    output_claude = Column(String(500), nullable=False, comment="Claude's response")
    output_deepseek = Column(String(500), nullable=False, comment="DeepSeek's response")
    winner = Column(String(100), nullable=False, comment="Winning model name")
    created_at = Column(
        DateTime(timezone=True),
        server_default=func.now(),
        comment="Vote timestamp"
    )